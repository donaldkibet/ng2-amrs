<div>
  <button class="btn btn-primary" (click)="goBack()">
    <span class="glyphicon glyphicon-arrow-left"></span>
    <span>Go back to tabular view</span>
  </button>
</div>
<hr />

<div *ngIf="familyTestingContactList.length > 0">
  <div>
    <button
      class="btn"
      [ngClass]="{
        'btn-default': !displayFamilyTree,
        'btn-success': displayFamilyTree
      }"
      style="margin-right: 0.5rem"
      (click)="toggleTreeView()"
    >
      <span class="glyphicon glyphicon-list-alt"></span>
      <span> list of Contacts</span>
    </button>
    <button
      class="btn"
      [ngClass]="{
        'btn-default': displayFamilyTree,
        'btn-success': !displayFamilyTree
      }"
      (click)="toggleTreeView()"
    >
      <span class="glyphicon glyphicon-tree-conifer"></span>
      <span> Tree View</span>
    </button>
  </div>

  <hr />
  <div>
    <div *ngIf="displayFamilyTree">
      <ag-grid-angular
        #agGrid
        style="width: 100%; height: 200px"
        class="ag-blue"
        [rowData]="familyTestingContactList"
        [gridOptions]="gridOptions"
      >
        ></ag-grid-angular
      >
      <hr />
      <div
        *ngIf="familyTestingContactList"
        style="display: flex; justify-content: space-between"
      >
        <p class="bg-info" style="padding: 4px">
          <b>
            <span style="color: green" class="glyphicon glyphicon-ok"
              >All records loaded
              {{ '[ ' + familyTestingContactList.length + ' ]' }}</span
            ></b
          >
        </p>

        <span style="margin: 0px; float: right">
          <button
            class="btn btn-info"
            (click)="exportAllData()"
            style="color: #fff"
          >
            <i class="inline fa fa-file-excel-o"></i>
            <span>Export as CSV</span>
          </button>
        </span>
      </div>
    </div>
    <div *ngIf="!displayFamilyTree">
      <h4>Tree to be drawn here</h4>
    </div>
  </div>
</div>

<div *ngIf="familyTestingContactList.length === 0">
  <h4>Patient has no family history information to show</h4>
</div>

<div class="loader" *ngIf="isLoading">
  <span><i class="fa fa-spinner fa-spin"></i>Loading...</span>
</div>

<div class="alert alert-danger fade in" *ngIf="showInfoMessage">
  <a href="#" class="close" data-dismiss="alert">&times;</a>
  <h4 *ngIf="!statusError">
    <strong><span class="glyphicon glyphicon-warning-sign"></span> </strong> An
    error occurred while trying to load the report. Please try again.
  </h4>
  <p>
    <small>{{ errorMessage }}</small>
  </p>
</div>
